//
// Created by Noah Holbrook on 1/21/24.
//

#ifndef AMETHYST_CHESS_PAWNSTRUCTURE_H
#define AMETHYST_CHESS_PAWNSTRUCTURE_H
namespace isolated_pawns {
    constexpr const static unsigned long PAWN_NEIGHBOR_FILES[8] = {65280ULL,16711935ULL,4278255360ULL,1095233372160ULL,280379743272960ULL,71777214277877760ULL,18374966855136706560ULL,71776119061217280ULL};
    constexpr const static int mg_isolated_pawn_penalty = 30; // I picked these based on what seems about right
    constexpr const static int eg_isolated_pawn_penalty = 40;
}

namespace passed_pawns {
    unsigned long getAFileAheadOfRank (const int rank) {
        return 256ULL - (2ULL << rank);
    }
    unsigned long getAFileBehindRank (const int rank) {
        return (1ULL << rank) - 1;
    }

    unsigned long getWhitePawnStoppingSquares (const int square) {
        const unsigned long aFileAhead = getAFileAheadOfRank(square & 7);
        const int fileOnly = square & 56;
        return aFileAhead << fileOnly >> 8 | aFileAhead << fileOnly | aFileAhead << fileOnly << 8;
    }

    unsigned long getBlackPawnStoppingSquares (const int square) {
        const unsigned long aFileBehind = getAFileBehindRank(square & 7);
        const int fileOnly = square & 56;
        return aFileBehind << fileOnly >> 8 | aFileBehind << fileOnly | aFileBehind << fileOnly << 8;
    }

    constexpr const static unsigned long WHITE_PAWN_STOPPING_SQUARES[64] = {65278ULL, 64764ULL, 63736ULL, 61680ULL, 57568ULL, 49344ULL, 32896ULL, 0ULL, 16711422ULL, 16579836ULL, 16316664ULL, 15790320ULL, 14737632ULL, 12632256ULL, 8421504ULL, 0ULL, 4278124032ULL, 4244438016ULL, 4177065984ULL, 4042321920ULL, 3772833792ULL, 3233857536ULL, 2155905024ULL, 0ULL, 1095199752192ULL, 1086576132096ULL, 1069328891904ULL, 1034834411520ULL, 965845450752ULL, 827867529216ULL, 551911686144ULL, 0ULL, 280371136561152ULL, 278163489816576ULL, 273748196327424ULL, 264917609349120ULL, 247256435392512ULL, 211934087479296ULL, 141289391652864ULL, 0ULL, 71775010959654912ULL, 71209853393043456ULL, 70079538259820544ULL, 67818907993374720ULL, 63297647460483072ULL, 54255126394699776ULL, 36170084263133184ULL, 0ULL, 18374402805671657472ULL, 18229722468619124736ULL, 17940361794514059264ULL, 17361640446303928320ULL, 16204197749883666432ULL, 13889312357043142656ULL, 9259541571362095104ULL, 0ULL, 18374123529718202368ULL, 18229445391688925184ULL, 17940089115630370816ULL, 17361376563513262080ULL, 16203951459279044608ULL, 13889101250810609664ULL, 9259400833873739776ULL, 0ULL};
    constexpr const static unsigned long BLACK_PAWN_STOPPING_SQUARES[64] = {0ULL, 257ULL, 771ULL, 1799ULL, 3855ULL, 7967ULL, 16191ULL, 32639ULL, 0ULL, 65793ULL, 197379ULL, 460551ULL, 986895ULL, 2039583ULL, 4144959ULL, 8355711ULL, 0ULL, 16843008ULL, 50529024ULL, 117901056ULL, 252645120ULL, 522133248ULL, 1061109504ULL, 2139062016ULL, 0ULL, 4311810048ULL, 12935430144ULL, 30182670336ULL, 64677150720ULL, 133666111488ULL, 271644033024ULL, 547599876096ULL, 0ULL, 1103823372288ULL, 3311470116864ULL, 7726763606016ULL, 16557350584320ULL, 34218524540928ULL, 69540872454144ULL, 140185568280576ULL, 0ULL, 282578783305728ULL, 847736349917184ULL, 1978051483140096ULL, 4238681749585920ULL, 8759942282477568ULL, 17802463348260864ULL, 35887505479827456ULL, 0ULL, 72340168526266368ULL, 217020505578799104ULL, 506381179683864576ULL, 1085102527893995520ULL, 2242545224314257408ULL, 4557430617154781184ULL, 9187201402835828736ULL, 0ULL, 72339069014638592ULL, 217017207043915776ULL, 506373483102470144ULL, 1085086035219578880ULL, 2242511139453796352ULL, 4557361347922231296ULL, 9187061764859101184ULL};
}

#endif //AMETHYST_CHESS_PAWNSTRUCTURE_H
